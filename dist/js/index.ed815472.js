"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const R=require("./index.8e48c50d.js"),re=require("./index.43c4e16d.js"),e=require("./index.e60f37de.js"),ae=require("./_plugin-vue_export-helper.9e7bfbef.js"),[le,B]=e.createNamespace("cell"),O={icon:String,size:String,title:e.numericProp,value:e.numericProp,label:e.numericProp,center:Boolean,isLink:Boolean,border:e.truthProp,required:Boolean,iconPrefix:String,valueClass:e.unknownProp,labelClass:e.unknownProp,titleClass:e.unknownProp,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},ie=e.extend({},O,R.routeProps);var oe=e.defineComponent({name:le,props:ie,setup(t,{slots:r}){const l=R.useRoute(),o=()=>{if(r.label||e.isDef(t.label))return e.createVNode("div",{class:[B("label"),t.labelClass]},[r.label?r.label():t.label])},i=()=>{if(r.title||e.isDef(t.title))return e.createVNode("div",{class:[B("title"),t.titleClass],style:t.titleStyle},[r.title?r.title():e.createVNode("span",null,[t.title]),o()])},f=()=>{const s=r.value||r.default;if(s||e.isDef(t.value)){const m=r.title||e.isDef(t.title);return e.createVNode("div",{class:[B("value",{alone:!m}),t.valueClass]},[s?s():e.createVNode("span",null,[t.value])])}},_=()=>{if(r.icon)return r.icon();if(t.icon)return e.createVNode(e.Icon,{name:t.icon,class:B("left-icon"),classPrefix:t.iconPrefix},null)},x=()=>{if(r["right-icon"])return r["right-icon"]();if(t.isLink){const s=t.arrowDirection?`arrow-${t.arrowDirection}`:"arrow";return e.createVNode(e.Icon,{name:s,class:B("right-icon")},null)}};return()=>{var s,g;const{size:m,center:S,border:P,isLink:I,required:C}=t,w=(s=t.clickable)!=null?s:I,a={center:S,required:C,clickable:w,borderless:!P};return m&&(a[m]=!!m),e.createVNode("div",{class:B(a),role:w?"button":void 0,tabindex:w?0:void 0,onClick:l},[_(),i(),f(),x(),(g=r.extra)==null?void 0:g.call(r)])}}});const ce=e.withInstall(oe),[ue,se]=e.createNamespace("form"),de={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:e.numericProp,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:e.truthProp,showErrorMessage:e.truthProp,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var fe=e.defineComponent({name:ue,props:de,emits:["submit","failed"],setup(t,{emit:r,slots:l}){const{children:o,linkChildren:i}=e.useChildren(e.FORM_KEY),f=a=>a?o.filter(d=>a.includes(d.name)):o,_=a=>new Promise((d,h)=>{const v=[];f(a).reduce((T,E)=>T.then(()=>{if(!v.length)return E.validate().then(N=>{N&&v.push(N)})}),Promise.resolve()).then(()=>{v.length?h(v):d()})}),x=a=>new Promise((d,h)=>{const v=f(a);Promise.all(v.map(V=>V.validate())).then(V=>{V=V.filter(Boolean),V.length?h(V):d()})}),s=a=>{const d=o.find(h=>h.name===a);return d?new Promise((h,v)=>{d.validate().then(V=>{V?v(V):h()})}):Promise.reject()},g=a=>typeof a=="string"?s(a):t.validateFirst?_(a):x(a),m=a=>{typeof a=="string"&&(a=[a]),f(a).forEach(h=>{h.resetValidation()})},S=()=>o.reduce((a,d)=>(a[d.name]=d.getValidationStatus(),a),{}),P=(a,d)=>{o.some(h=>h.name===a?(h.$el.scrollIntoView(d),!0):!1)},I=()=>o.reduce((a,d)=>(a[d.name]=d.formValue.value,a),{}),C=()=>{const a=I();g().then(()=>r("submit",a)).catch(d=>{r("failed",{values:a,errors:d}),t.scrollToError&&d[0].name&&P(d[0].name)})},w=a=>{e.preventDefault(a),C()};return i({props:t}),e.useExpose({submit:C,validate:g,getValues:I,scrollToField:P,resetValidation:m,getValidationStatus:S}),()=>{var a;return e.createVNode("form",{class:se(),onSubmit:w},[(a=l.default)==null?void 0:a.call(l)])}}});const me=e.withInstall(fe);function q(t){return Array.isArray(t)?!t.length:t===0?!1:!t}function ge(t,r){if(q(t)){if(r.required)return!1;if(r.validateEmpty===!1)return!0}return!(r.pattern&&!r.pattern.test(String(t)))}function he(t,r){return new Promise(l=>{const o=r.validator(t,r);if(e.isPromise(o)){o.then(l);return}l(o)})}function F(t,r){const{message:l}=r;return e.isFunction(l)?l(t,r):l||""}function ve({target:t}){t.composing=!0}function L({target:t}){t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}function be(t,r){const l=e.getRootScrollTop();t.style.height="auto";let o=t.scrollHeight;if(e.isObject(r)){const{maxHeight:i,minHeight:f}=r;i!==void 0&&(o=Math.min(o,i)),f!==void 0&&(o=Math.max(o,f))}o&&(t.style.height=`${o}px`,e.setRootScrollTop(l))}function Ve(t){return t==="number"?{type:"text",inputmode:"decimal"}:t==="digit"?{type:"tel",inputmode:"numeric"}:{type:t}}function p(t){return[...t].length}function ye(t,r){return[...t].slice(0,r).join("")}let _e=0;function xe(){const t=e.getCurrentInstance(),{name:r="unknown"}=(t==null?void 0:t.type)||{};return`${r}-${++_e}`}const[Se,y]=e.createNamespace("field"),Ce={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:e.numericProp,formatter:Function,clearIcon:e.makeStringProp("clear"),modelValue:e.makeNumericProp(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:e.makeStringProp("focus"),formatTrigger:e.makeStringProp("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},we=e.extend({},O,Ce,{rows:e.numericProp,type:e.makeStringProp("text"),rules:Array,autosize:[Boolean,Object],labelWidth:e.numericProp,labelClass:e.unknownProp,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Pe=e.defineComponent({name:Se,props:we,emits:["blur","focus","clear","keypress","click-input","end-validate","start-validate","click-left-icon","click-right-icon","update:modelValue"],setup(t,{emit:r,slots:l}){const o=xe(),i=e.reactive({status:"unvalidated",focused:!1,validateMessage:""}),f=e.ref(),_=e.ref(),x=e.ref(),{parent:s}=e.useParent(e.FORM_KEY),g=()=>{var n;return String((n=t.modelValue)!=null?n:"")},m=n=>{if(e.isDef(t[n]))return t[n];if(s&&e.isDef(s.props[n]))return s.props[n]},S=e.computed(()=>{const n=m("readonly");if(t.clearable&&!n){const c=g()!=="",u=t.clearTrigger==="always"||t.clearTrigger==="focus"&&i.focused;return c&&u}return!1}),P=e.computed(()=>x.value&&l.input?x.value():t.modelValue),I=n=>n.reduce((c,u)=>c.then(()=>{if(i.status==="failed")return;let{value:b}=P;if(u.formatter&&(b=u.formatter(b,u)),!ge(b,u)){i.status="failed",i.validateMessage=F(b,u);return}if(u.validator)return q(b)&&u.validateEmpty===!1?void 0:he(b,u).then(k=>{k&&typeof k=="string"?(i.status="failed",i.validateMessage=k):k===!1&&(i.status="failed",i.validateMessage=F(b,u))})}),Promise.resolve()),C=()=>{i.status="unvalidated",i.validateMessage=""},w=()=>r("end-validate",{status:i.status}),a=(n=t.rules)=>new Promise(c=>{C(),n?(r("start-validate"),I(n).then(()=>{i.status==="failed"?(c({name:t.name,message:i.validateMessage}),w()):(i.status="passed",c(),w())})):c()}),d=n=>{if(s&&t.rules){const{validateTrigger:c}=s.props,u=e.toArray(c).includes(n),b=t.rules.filter(k=>k.trigger?e.toArray(k.trigger).includes(n):u);b.length&&a(b)}},h=n=>{const{maxlength:c}=t;if(e.isDef(c)&&p(n)>c){const u=g();return u&&p(u)===+c?u:ye(n,+c)}return n},v=(n,c="onChange")=>{if(n=h(n),t.type==="number"||t.type==="digit"){const u=t.type==="number";n=e.formatNumber(n,u,u)}t.formatter&&c===t.formatTrigger&&(n=t.formatter(n)),f.value&&f.value.value!==n&&(f.value.value=n),n!==t.modelValue&&r("update:modelValue",n)},V=n=>{n.target.composing||v(n.target.value)},T=()=>{var n;return(n=f.value)==null?void 0:n.blur()},E=()=>{var n;return(n=f.value)==null?void 0:n.focus()},N=()=>{const n=f.value;t.type==="textarea"&&t.autosize&&n&&be(n,t.autosize)},j=n=>{i.focused=!0,r("focus",n),e.nextTick(N),m("readonly")&&T()},z=n=>{m("readonly")||(i.focused=!1,v(g(),"onBlur"),r("blur",n),d("onBlur"),e.nextTick(N),e.resetScroll())},M=n=>r("click-input",n),W=n=>r("click-left-icon",n),U=n=>r("click-right-icon",n),H=n=>{e.preventDefault(n),r("update:modelValue",""),r("clear",n)},$=e.computed(()=>{if(typeof t.error=="boolean")return t.error;if(s&&s.props.showError&&i.status==="failed")return!0}),K=e.computed(()=>{const n=m("labelWidth");if(n)return{width:e.addUnit(n)}}),G=n=>{n.keyCode===13&&(!(s&&s.props.submitOnEnter)&&t.type!=="textarea"&&e.preventDefault(n),t.type==="search"&&T()),r("keypress",n)},D=()=>t.id||`${o}-input`,Y=()=>i.status,J=()=>{const n=y("control",[m("inputAlign"),{error:$.value,custom:!!l.input,"min-height":t.type==="textarea"&&!t.autosize}]);if(l.input)return e.createVNode("div",{class:n,onClick:M},[l.input()]);const c={id:D(),ref:f,name:t.name,rows:t.rows!==void 0?+t.rows:void 0,class:n,disabled:m("disabled"),readonly:m("readonly"),autofocus:t.autofocus,placeholder:t.placeholder,autocomplete:t.autocomplete,enterkeyhint:t.enterkeyhint,"aria-labelledby":t.label?`${o}-label`:void 0,onBlur:z,onFocus:j,onInput:V,onClick:M,onChange:L,onKeypress:G,onCompositionend:L,onCompositionstart:ve};return t.type==="textarea"?e.createVNode("textarea",c,null):e.createVNode("input",e.mergeProps(Ve(t.type),c),null)},Q=()=>{const n=l["left-icon"];if(t.leftIcon||n)return e.createVNode("div",{class:y("left-icon"),onClick:W},[n?n():e.createVNode(e.Icon,{name:t.leftIcon,classPrefix:t.iconPrefix},null)])},X=()=>{const n=l["right-icon"];if(t.rightIcon||n)return e.createVNode("div",{class:y("right-icon"),onClick:U},[n?n():e.createVNode(e.Icon,{name:t.rightIcon,classPrefix:t.iconPrefix},null)])},Z=()=>{if(t.showWordLimit&&t.maxlength){const n=p(g());return e.createVNode("div",{class:y("word-limit")},[e.createVNode("span",{class:y("word-num")},[n]),e.createTextVNode("/"),t.maxlength])}},ee=()=>{if(s&&s.props.showErrorMessage===!1)return;const n=t.errorMessage||i.validateMessage;if(n){const c=l["error-message"],u=m("errorMessageAlign");return e.createVNode("div",{class:y("error-message",u)},[c?c({message:n}):n])}},te=()=>{const n=m("colon")?":":"";if(l.label)return[l.label(),n];if(t.label)return e.createVNode("label",{id:`${o}-label`,for:D()},[t.label+n])},ne=()=>[e.createVNode("div",{class:y("body")},[J(),S.value&&e.createVNode(e.Icon,{ref:_,name:t.clearIcon,class:y("clear")},null),X(),l.button&&e.createVNode("div",{class:y("button")},[l.button()])]),Z(),ee()];return e.useExpose({blur:T,focus:E,validate:a,formValue:P,resetValidation:C,getValidationStatus:Y}),e.provide(e.CUSTOM_FIELD_INJECTION_KEY,{customValue:x,resetValidation:C,validateWithTrigger:d}),e.watch(()=>t.modelValue,()=>{v(g()),C(),d("onChange"),e.nextTick(N)}),e.onMounted(()=>{v(g(),t.formatTrigger),e.nextTick(N)}),e.useEventListener("touchstart",H,{target:e.computed(()=>{var n;return(n=_.value)==null?void 0:n.$el})}),()=>{const n=m("disabled"),c=m("labelAlign"),u=te(),b=Q();return e.createVNode(ce,{size:t.size,icon:t.leftIcon,class:y({error:$.value,disabled:n,[`label-${c}`]:c}),center:t.center,border:t.border,isLink:t.isLink,clickable:t.clickable,titleStyle:K.value,valueClass:y("value"),titleClass:[y("label",[c,{required:t.required}]),t.labelClass],arrowDirection:t.arrowDirection},{icon:b?()=>b:null,title:u?()=>u:null,value:ne,extra:l.extra})}}});const Ne=e.withInstall(Pe),[ke,A]=e.createNamespace("cell-group"),Ie={title:String,inset:Boolean,border:e.truthProp};var Be=e.defineComponent({name:ke,inheritAttrs:!1,props:Ie,setup(t,{slots:r,attrs:l}){const o=()=>{var f;return e.createVNode("div",e.mergeProps({class:[A({inset:t.inset}),{[e.BORDER_TOP_BOTTOM]:t.border&&!t.inset}]},l),[(f=r.default)==null?void 0:f.call(r)])},i=()=>e.createVNode("div",{class:A("title",{inset:t.inset})},[r.title?r.title():t.title]);return()=>t.title||r.title?e.createVNode(e.Fragment,null,[i(),o()]):o()}});const Te=e.withInstall(Be);const Ee=t=>(e.pushScopeId("data-v-0e3aa2a1"),t=t(),e.popScopeId(),t),pe={class:"app-login"},Me=Ee(()=>e.createBaseVNode("h2",null,"\u767B\u5F55",-1)),$e=e.defineComponent({__name:"index",setup(t){const r=e.useUserStore(),l=e.reactive({username:"",password:""}),o=e.ref(null),i=f=>{console.log(f),o.value.validate().then(()=>{r.login(l).then(()=>{console.log(1),e.router.push({name:"home"})})})};return(f,_)=>{const x=Ne,s=Te,g=re.Button,m=me;return e.openBlock(),e.createElementBlock("div",pe,[Me,e.createVNode(m,{ref_key:"ruleForm",ref:o,onSubmit:i},{default:e.withCtx(()=>[e.createVNode(s,null,{default:e.withCtx(()=>[e.createVNode(x,{modelValue:l.username,"onUpdate:modelValue":_[0]||(_[0]=S=>l.username=S),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"]),e.createVNode(x,{modelValue:l.password,"onUpdate:modelValue":_[1]||(_[1]=S=>l.password=S),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"])]),_:1}),e.createVNode(g,{round:"",block:"",type:"primary","native-type":"submit"},{default:e.withCtx(()=>[e.createTextVNode(" \u767B\u5F55 ")]),_:1})]),_:1},512)])}}});const De=ae._export_sfc($e,[["__scopeId","data-v-0e3aa2a1"]]);exports.default=De;
